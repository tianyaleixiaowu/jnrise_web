function getRequestByName(e){var n=window.location.search,t="";if(-1!=n.indexOf("?"))for(var r=n.substr(1).split("&"),o=0;o<r.length;o++)-1!=r[o].indexOf(e+"=")&&(t=unescape(r[o].substring(e.length+1,r[o].length)));return t}function getShowTimes(e){var n=new Date;return Math.round((n.getTime()-e)/1e3)}function checkPhone(e){return!!/^1(3|4|5|7|8)\d{9}$/.test(e)}function uuid(e,n){var t,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(n=n||r.length,e)for(t=0;t<e;t++)o[t]=r[0|Math.random()*n];else{var i;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",t=0;t<36;t++)o[t]||(i=0|16*Math.random(),o[t]=r[19==t?3&i|8:i])}return o.join("")}function get_uuid(){var e=(new Date).getTime().toString();return uuid(8,16)+e.substr(6,8)}function get_vid(){return(new Date).getTime().toString().substr(3,8)}function Cookies(){this.get=function(e){for(var n=document.cookie.split(";"),t="",r=0;r<n.length;r++)if(n[r].Trim().substr(0,e.length)==e){t=n[r].Trim().substr(e.length+1);break}return unescape(t)},this.set=function(e,n){var t="";if(e&&n&&(t+=e+"="+escape(n)+";"),arguments[2]){var r=getSec(arguments[2]),o=new Date;o.setTime(o.getTime()+1*r),t+="expires="+o.toGMTString()+";"}arguments[3]&&(t+="domain="+arguments[3]+";"),arguments[4]&&(t+="path="+arguments[4]+";"),document.cookie=t},this.remove=function(e){var n=new Date;n.setFullYear(n.getFullYear()-1);var t=" "+e+"=;expires="+n+";";document.cookie=t}}function getSec(e){var n=1*e.substring(1,e.length),t=e.substring(0,1);return"s"==t?1e3*n:"h"==t?60*n*60*1e3:"d"==t?24*n*60*60*1e3:void 0}$(function(){var e=window.location.href,n=getRequestByName("sign"),t=(new Date).getTime(),r=new Cookies,o=r.get("mm_uid"),i=get_vid(),s=returnCitySN.cip,a=navigator.userAgent,c="";""!=o&&null!=o||(o=get_uuid(),r.set("mm_uid",o,"d30")),$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/enter",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:o,url:e,ip:s,userAgent:a,sign:n,flag:2},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}});var l=window.setInterval(function(){var r=getShowTimes(t);r<=180?$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/stay",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:o,url:e,ip:s,userAgent:a,sign:n,totalTime:r,otherInfo:"",version:i},dataType:"json",success:function(e){},error:function(e){console.log(e)}}):window.clearInterval(l)},1e3);$("html,body").animate({scrollTop:"0"},1);var u=0;u=/Android|iPhone|BlackBerry/i.test(navigator.userAgent)?1:0,$(".form-box").on("click","input",function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/click",data:{sign:n,uuid:o,deviceType:u,clickType:1,company:"rise",url:e,ip:s,userAgent:a,userId:o,otherInfo:$(this).attr("id")},success:function(e){},error:function(e){console.log(e)}})}),$(".form-box").on("input","#phone",function(){var t=$(this).val();$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/click",data:{sign:n,uuid:o,deviceType:u,clickType:2,company:"rise",url:e,ip:s,userAgent:a,userId:o,otherInfo:$(this).attr("id")+":"+t},success:function(e){},error:function(e){console.log(e)}})}),$("#main-btn-submit").click(function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/click",data:{sign:n,uuid:o,deviceType:u,clickType:3,company:"rise",url:e,ip:s,userAgent:a,userId:o,otherInfo:$(this).attr("id")},success:function(e){},error:function(e){console.log(e)}});var t=$.trim($("#phone").val()),r=$.trim($("#code").val()),i=$.trim($("#age").val()),l=$.trim($("#name").val()),m=!0;""!=t&&checkPhone(t)?$("#phone").parents(".form-item").removeClass("error"):(m=!1,$("#phone").parents(".form-item").addClass("error").find(".message").html("请正确输入")),""==r||r!=c?(m=!1,$("#code").parents(".form-item").addClass("error").find(".message").html("请正确输入")):$("#code").parents(".form-item").removeClass("error"),""==i?(m=!1,$("#age").parents(".form-item").addClass("error").find(".message").html("请正确输入")):$("#age").parents(".form-item").removeClass("error"),""==l?(m=!1,$("#name").parents(".form-item").addClass("error").find(".message").html("请正确输入")):$("#name").parents(".form-item").removeClass("error"),m&&$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/info",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:e,ip:s,userAgent:a,userId:o,phone:t,name:l,age:i,gender:0,school:"",sign:n},dataType:"json",success:function(e){console.log(e),$(".modal-message").show(),$(".form-box input").val("")},error:function(e){console.log(e)}})});var m,d=60;$("#getcode").click(function(){clearInterval(m);var e=$.trim($("#phone").val());""!=e&&checkPhone(e)?($("#phone").parents(".form-item").removeClass("error"),d=60,$("#getcode").html(d+"s"),m=setInterval(function(){d--,$("#getcode").html(d+"s"),0==d&&(clearInterval(m),$("#getcode").removeClass("disabled").html("重新获取"))},1e3),$.ajax({type:"GET",url:"https://mm.jnrise.cn/loading/server/sms",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:e},dataType:"json",success:function(e){c=0==e.code?e.message:""},error:function(e){console.log(e)}})):$("#phone").parents(".form-item").addClass("error").find(".message").html("请正确输入")}),$(".modal-message").click(function(e){(e=e||window.event).stopPropagation(),$(this).hide()}),$("#main-btn-talk-bottom").click(function(t){(t=t||window.event).stopPropagation(),$("html,body").animate({scrollTop:"0"},400),$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/click",data:{sign:n,uuid:o,deviceType:u,clickType:3,company:"rise",url:e,ip:s,userAgent:a,userId:o,otherInfo:$(this).attr("id")},success:function(e){},error:function(e){console.log(e)}})}),$(".main").on("click",function(){var n=event||window.event,t=document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.scrollTop||document.body.scrollTop,i=(n.pageX||n.clientX+t)-$(".main")[0].offsetLeft,c=n.pageY||n.clientY+r,l=$(".main").width(),u=$(".main").height(),m=Math.round(540*i/l),d=Math.round(540*c/l);$.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/server/clickCount",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:e,ip:s,userAgent:a,userId:o,type:"click",coordinate:m+","+d,otherInfo:"x: "+i+",y: "+c+",w:"+l+",h:"+u},dataType:"json",success:function(e){},error:function(e){console.log(e)}})})}),String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};