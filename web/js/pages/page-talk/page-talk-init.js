function init(e,n,o){var t=e.appKey,c=e.token,s=e.navi||"",a=(o=o||{}).RongIMLib||window.RongIMLib,i=a.RongIMClient,l=o.protobuf||null,r={};""!==s&&(r.navi=s);var C=e.api||"";""!==C&&(r.api=C),null!=l&&(r.protobuf=l);var g=null,u=e.imClient;u&&(g=new a.VCDataProvider(u)),a.RongIMClient.init(t,g,r);var I=i.getInstance();i.setConnectionStatusListener({onChanged:function(e){switch(e){case a.ConnectionStatus.CONNECTED:case 0:console.log("连接成功"),n.getInstance&&n.getInstance(I);break;case a.ConnectionStatus.CONNECTING:case 1:console.log("连接中");break;case a.ConnectionStatus.DISCONNECTED:case 2:console.log("当前用户主动断开链接");break;case a.ConnectionStatus.NETWORK_UNAVAILABLE:case 3:console.log("网络不可用");break;case a.ConnectionStatus.CONNECTION_CLOSED:case 4:console.log("未知原因，连接关闭");break;case a.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:case 6:console.log("用户账户在其他设备登录，本机会被踢掉线");break;case a.ConnectionStatus.DOMAIN_INCORRECT:case 12:console.log("当前运行域名错误，请检查安全域名配置")}}}),i.setOnReceiveMessageListener({onReceived:function(e){console.log("新消息: "+e.targetId),console.log(e),n.receiveNewMessage&&n.receiveNewMessage(e)}}),i.connect(c,{onSuccess:function(e){n.getCurrentUser&&n.getCurrentUser({userId:e}),console.log("链接成功，用户id："+e)},onTokenIncorrect:function(){console.log("token无效")},onError:function(e){console.log(e)}},e.userId)}