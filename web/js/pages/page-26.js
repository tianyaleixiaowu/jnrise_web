function getRequestByName(e){var n=window.location.search,o="";if(-1!=n.indexOf("?"))for(var t=n.substr(1).split("&"),a=0;a<t.length;a++)-1!=t[a].indexOf(e+"=")&&(o=unescape(t[a].substring(e.length+1,t[a].length)));return o}function checkPhone(e){return!!/^1(3|4|5|7|8)\d{9}$/.test(e)}function get_uuid(){var e=(new Date).getTime().toString();return uuid(8,16)+e.substr(6,8)}function uuid(e,n){var o,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(n=n||t.length,e)for(o=0;o<e;o++)a[o]=t[0|Math.random()*n];else{var r;for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",o=0;o<36;o++)a[o]||(r=0|16*Math.random(),a[o]=t[19==o?3&r|8:r])}return a.join("")}function getShowTimes(e){var n=new Date;return Math.round((n.getTime()-e)/1e3)}function getScrollHeight(){var e=0,n=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(n=document.documentElement.scrollHeight),e-n>0?e:n}$(function(){var e=getRequestByName("sign"),n="",o=get_uuid(),t=(new Date).getTime(),a=window.location.href;$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/enter",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:o,sign:e,flag:2},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}});var r=window.setInterval(function(){var n=getShowTimes(t);n<=180?$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/stay",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:a,sign:e,userId:o,totalTime:n,otherInfo:""},dataType:"json",success:function(e){},error:function(e){console.log(e)}}):window.clearInterval(r)},1e3);$(".main .main-bottom").hide(),window.onscroll=function(){(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>=300?$(".main .main-bottom").fadeIn(400):$(".main .main-bottom").fadeOut(400)},$(".tab .tab-title a").click(function(){var e=$(this).index();$(".tab ul.tab-content li").hide().eq(e).show()}),$("#submit-1").click(function(){var e=$.trim($("#phone-1").val());if(""==e)$("#phone-1").parents(".form-item").addClass("error").find(".message").html("请正确输入");else if(checkPhone(e)){$("#phone-1").parents(".form-item").removeClass("error"),$(".main-code .code-content p span").html(e),$(".main-code").show();var o=10;$("#getCode").html(o+"s").addClass("disabled");var t=setInterval(function(){o--,$("#getCode").html(o+"s"),0==o&&(clearInterval(t),$("#getCode").removeClass("disabled").html("重新获取"))},1e3);$.ajax({type:"GET",url:"https://mm.jnrise.cn:88/loading/server/sms",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:e},dataType:"json",success:function(e){n=0==e.code?e.message:""},error:function(e){console.log(e)}})}else $("#phone-1").parents(".form-item").addClass("error").find(".message").html("请正确输入")}),$("#submit-2").click(function(){var e=$.trim($("#phone-2").val());if(""==e)$("#phone-2").parents(".form-item").addClass("error").find(".message").html("请正确输入");else if(checkPhone(e)){$("#phone-2").parents(".form-item").removeClass("error"),$(".main-code .code-content p span").html(e),$(".main-code").show();var o=10;$("#getCode").html(o+"s").addClass("disabled");var t=setInterval(function(){o--,$("#getCode").html(o+"s"),0==o&&(clearInterval(t),$("#getCode").removeClass("disabled").html("重新获取"))},1e3);$.ajax({type:"GET",url:"https://mm.jnrise.cn:88/loading/server/sms",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:e},dataType:"json",success:function(e){n=0==e.code?e.message:""},error:function(e){console.log(e)}})}else $("#phone-2").parents(".form-item").addClass("error").find(".message").html("请正确输入")}),$("#getCode").click(function(){if($(this).hasClass("disabled"))console.log("can not click");else{var e=10;$("#getCode").html(e+"s").addClass("disabled");var o=setInterval(function(){e--,$("#getCode").html(e+"s"),0==e&&(clearInterval(o),$("#getCode").removeClass("disabled").html("重新获取"))},1e3);$.ajax({type:"GET",url:"https://mm.jnrise.cn:88/loading/server/sms",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:phone},dataType:"json",success:function(e){n=0==e.code?e.message:""},error:function(e){console.log(e)}})}}),$("#submit-3").click(function(){var t=$.trim($(".main-code .code-content p span").html()),a=$.trim($("#code").val()),r=!0;""==a?(r=!1,$("#code").parents(".form-item").addClass("error").find(".message").html("请输入验证码")):a!=n?(r=!1,$("#code").parents(".form-item").addClass("error").find(".message").html("验证码错误")):$("#code").parents(".form-item").removeClass("error"),r&&$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/info",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:o,phone:t,name:name,age:0,gender:0,school:"",sign:e},dataType:"json",success:function(e){console.log(e),$(".main-code").hide(),$(".main-modal").show()},error:function(e){console.log(e)}})}),$(".main-modal").click(function(){var e=e||window.event;e.stopPropagation(),$(this).hide(),$("input").val("")}),$(".main-code").click(function(){var e=e||window.event;e.stopPropagation(),$(this).hide(),$("input").val("")}),$(".main-code .code-content").click(function(e){(e=e||window.event).stopPropagation()}),$(".main").on("click",function(){var e=event||window.event,n=document.documentElement.scrollLeft||document.body.scrollLeft,t=document.documentElement.scrollTop||document.body.scrollTop,r=(e.pageX||e.clientX+n)-$(".main")[0].offsetLeft,i=e.pageY||e.clientY+t,s=$(".main").width(),c=$(".main").height(),l=Math.round(540*r/s),d=Math.round(540*i/s);$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/clickCount",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:a,userId:o,coordinate:l+","+d,otherInfo:"x: "+r+",y: "+i+",w:"+s+",h:"+c},dataType:"json",success:function(e){},error:function(e){console.log(e)}})});var i=0;i=/Android|iPhone|BlackBerry/i.test(navigator.userAgent)?1:0,$(".main").on("click","input",function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:o,deviceType:i,clickType:1,company:"rise",userId:o,otherInfo:$(this).attr("id")},success:function(e){},error:function(e){console.log(e)}})}),$(".main").on("input","input",function(){var n=$(this).val();$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:o,deviceType:i,clickType:2,company:"rise",userId:o,otherInfo:$(this).attr("id")+":"+n},success:function(e){},error:function(e){console.log(e)}})}),$(".main").on("click","button",function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:o,deviceType:i,clickType:3,company:"rise",userId:o,otherInfo:$(this).attr("id")},success:function(e){},error:function(e){console.log(e)}})})});