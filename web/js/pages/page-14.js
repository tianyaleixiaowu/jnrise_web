function getRequestSign(){var e=window.location.search;if(-1!=e.indexOf("?"))return e.substr(15)}function getRequest(){var e=window.location.search,n=new Object;if(-1!=e.indexOf("?"))for(var o=e.substr(1).split("&"),t=0;t<o.length;t++)o[t].split("=")[1].indexOf("%")<0?n[o[t].split("=")[0]]=unescape(o[t].split("=")[1]):n[o[t].split("=")[0]]=unescape(decodeURI(o[t].split("=")[1]));return n}function getRequestByName(e){var n=window.location.search,o="";if(-1!=n.indexOf("?"))for(var t=n.substr(1).split("&"),r=0;r<t.length;r++)-1!=t[r].indexOf(e+"=")&&(o=unescape(t[r].substring(e.length+1,t[r].length)));return o}function checkPhone(e){return!!/^1\d{10}$/.test(e)}$(function(){var e=getRequestByName("sign"),n=getRequestByName("openid");$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/enter",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{sign:e},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}}),$("#submit").click(function(){var o=$.trim($("#phone").val()),t=$.trim($("#is-old").val()),r=!0;""==o?(r=!1,$("#phone").parent(".form-item").addClass("error").find(".message").html("请输入您的手机号码获取六一专属试听课")):checkPhone(o)?$("#phone").parent(".form-item").removeClass("error"):(r=!1,$("#phone").parent(".form-item").addClass("error").find(".message").html("请输入有效的11位电话号码")),""==t?(r=!1,$("#is-old").parent(".form-item").addClass("error")):$("#is-old").parent(".form-item").removeClass("error"),r&&($.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/info",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{phone:o,name:name,age:0,gender:0,school:"",inRead:t,sign:e},dataType:"json",success:function(e){console.log(e),$(".modal").show(),$(".main .form-text").val("")},error:function(e){console.log(e)}}),$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/risewx/recommend",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:o,openId:n},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}}))}),$(".modal").click(function(){$(this).hide()}),$("#is-old").focus(function(){$(this).find("option[value='']").hide()}),$("#is-old").blur(function(){$(this).find("option[value='']").show()})});