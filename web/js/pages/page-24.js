function getRequestByName(e){var n=window.location.search,o="";if(-1!=n.indexOf("?"))for(var t=n.substr(1).split("&"),r=0;r<t.length;r++)-1!=t[r].indexOf(e+"=")&&(o=unescape(t[r].substring(e.length+1,t[r].length)));return o}function checkPhone(e){return!!/^1(3|4|5|7|8)\d{9}$/.test(e)}function get_uuid(){var e=(new Date).getTime().toString();return uuid(8,16)+e.substr(6,8)}function uuid(e,n){var o,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(n=n||t.length,e)for(o=0;o<e;o++)r[o]=t[0|Math.random()*n];else{var i;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",o=0;o<36;o++)r[o]||(i=0|16*Math.random(),r[o]=t[19==o?3&i|8:i])}return r.join("")}function getShowTimes(e){var n=new Date;return Math.round((n.getTime()-e)/1e3)}$(function(){var e=getRequestByName("sign"),n=get_uuid(),o=(new Date).getTime(),t=window.location.href;$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/enter",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:n,sign:e,flag:2},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}});var r=window.setInterval(function(){var i=getShowTimes(o);i<=180?$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/stay",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:t,sign:e,userId:n,totalTime:i,otherInfo:""},dataType:"json",success:function(e){},error:function(e){console.log(e)}}):window.clearInterval(r)},1e3);$("#submit").click(function(){var o=$.trim($("#phone").val()),t=!0;""==o?(t=!1,$("#phone").parent(".form-item").addClass("error").find(".message").html("请正确输入")):checkPhone(o)?$("#phone").parent(".form-item").removeClass("error"):(t=!1,$("#phone").parent(".form-item").addClass("error").find(".message").html("请正确输入")),t&&$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/info",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:n,phone:o,name:name,age:0,gender:0,school:"",sign:e},dataType:"json",success:function(e){console.log(e),$(".modal-form").hide(),$(".modal").show(),$(".main .form-text").val("")},error:function(e){console.log(e)}})}),$(".modal").click(function(){$(this).hide()}),$(".modal-form").click(function(){$(this).hide()}),$(".modal-form .main-form").click(function(e){(e=e||window.event).stopPropagation()}),$(".main").on("click",function(){var e=event||window.event,o=document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.scrollTop||document.body.scrollTop,i=(e.pageX||e.clientX+o)-$(".main")[0].offsetLeft,a=e.pageY||e.clientY+r,c=$(".main").width(),s=$(".main").height(),l=Math.round(540*i/c),u=Math.round(540*a/c);$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/clickCount",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",url:t,userId:n,coordinate:l+","+u,otherInfo:"x: "+i+",y: "+a+",w:"+c+",h:"+s},dataType:"json",success:function(e){},error:function(e){console.log(e)}})});var i=0;i=/Android|iPhone|BlackBerry/i.test(navigator.userAgent)?1:0,$(".main-form").on("click","input",function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:n,deviceType:i,clickType:1,company:"rise",userId:n,otherInfo:""},success:function(e){},error:function(e){console.log(e)}})}),$(".main-form").on("input","input",function(){var o=$(this).val();$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:n,deviceType:i,clickType:2,company:"rise",userId:n,otherInfo:o},success:function(e){},error:function(e){console.log(e)}})}),$(".main-form").on("click","button",function(){$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:n,deviceType:i,clickType:3,company:"rise",userId:n,otherInfo:"#submit"},success:function(e){},error:function(e){console.log(e)}})}),$("#register").click(function(){$(".modal-form").show(),$(".main .form-text").val(""),$.ajax({type:"POST",url:"https://mm.jnrise.cn:88/loading/server/click",data:{sign:e,uuid:n,deviceType:i,clickType:3,company:"rise",userId:n,otherInfo:"#register"},success:function(e){},error:function(e){console.log(e)}})})});