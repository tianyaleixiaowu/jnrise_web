function getRequestByName(e){var n=window.location.search,r="";if(-1!=n.indexOf("?"))for(var o=n.substr(1).split("&"),a=0;a<o.length;a++)-1!=o[a].indexOf(e+"=")&&(r=unescape(o[a].substring(e.length+1,o[a].length)));return r}function checkPhone(e){return!!/^1\d{10}$/.test(e)}$(function(){var e=getRequestByName("sign"),n=getRequestByName("openid");$("#btn-submit").click(function(){var r=$.trim($("#name").val()),o=$.trim($("#age").val()),a=$.trim($("#phone").val()),t=!0;""==r?(t=!1,$("#name").parent(".form-item").addClass("error").find(".message").html("请正确输入")):$("#name").parent(".form-item").removeClass("error"),""==o?(t=!1,$("#age").parent(".form-item").addClass("error").find(".message").html("请正确输入")):$("#age").parent(".form-item").removeClass("error"),""!=a&&checkPhone(a)?$("#phone").parent(".form-item").removeClass("error"):(t=!1,$("#phone").parent(".form-item").addClass("error").find(".message").html("请正确输入")),t&&($.ajax({type:"POST",url:"https://mm.jnrise.cn/loading/info",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{company:"rise",userId:0,phone:a,name:r,age:o,gender:0,school:"",sign:e},dataType:"json",success:function(e){console.log(e),$(".modal-message").show(),$(".main .form-text").val("")},error:function(e){console.log(e)}}),$.ajax({type:"POST",url:"https://mm.jnrise.cn/recommend",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{mobile:a,openId:n},dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}}))}),$(".modal-message").click(function(){$(this).hide()})});
